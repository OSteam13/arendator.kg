<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Избранное — Arendator.kg</title>
  <link rel="icon" href="./Arendatorkg.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>.container{max-width:1100px}.ar-4-3{aspect-ratio:4/3}.cover{width:100%;height:100%;object-fit:cover;display:block}</style>
</head>
<body class="bg-neutral-50 text-neutral-900">
  <header class="bg-white border-b">
    <div class="container mx-auto px-4 py-3 flex items-center gap-3">
      <a href="index.html" class="flex items-center gap-2"><img src="./Arendatorkg.png" alt="Arendator.kg" class="w-8 h-8 rounded-full object-contain"><span class="font-medium">Arendator.kg</span></a>
      <nav class="ml-auto text-sm flex gap-3">
        <a href="post.html" class="px-3 py-2 rounded-xl border border-neutral-200 hover:bg-neutral-50">Добавить объявление</a>
        <a href="sell.html" class="px-3 py-2 rounded-xl border border-neutral-200 hover:bg-neutral-50">Продажа</a>
        <a href="blog.html" class="px-3 py-2 rounded-xl border border-neutral-200 hover:bg-neutral-50">Блог</a>
      </nav>
    </div>
  </header>

  <main class="container mx-auto px-4 py-8">
    <h1 class="text-2xl font-bold mb-4">Избранное</h1>

    <div id="needLogin" class="hidden rounded-2xl border border-neutral-200 bg-white p-6 text-center">
      <p class="text-neutral-700">Чтобы видеть избранное, войдите по номеру телефона.</p>
      <button id="btnLogin" class="mt-3 px-4 py-2 rounded-xl bg-blue-600 text-white">Войти</button>
    </div>

    <div id="favList" class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
    <div id="empty" class="hidden text-neutral-600">Пока пусто. Добавляйте объявления в избранное на главной.</div>
  </main>

  <!-- простая модалка входа -->
  <div id="modalLogin" class="fixed inset-0 hidden items-center justify-center bg-black/40 p-4">
    <div class="w-full max-w-md rounded-2xl bg-white p-6 shadow">
      <div class="text-lg font-semibold mb-1">Вход</div>
      <input id="loginPhone" placeholder="0(555) 123-456" class="mt-2 w-full px-3 py-2 rounded-xl border border-neutral-200" />
      <input id="loginOtp" placeholder="Код из SMS" class="mt-2 w-full px-3 py-2 rounded-xl border border-neutral-200 hidden" />
      <div class="mt-3 flex gap-2">
        <button id="send" class="px-4 py-2 rounded-xl bg-neutral-900 text-white">Отправить код</button>
        <button id="confirm" class="px-4 py-2 rounded-xl bg-blue-600 text-white hidden">Войти</button>
      </div>
      <button id="close" class="mt-3 w-full px-4 py-2 rounded-xl border">Отмена</button>
    </div>
  </div>

  <script>
    const needLogin=document.getElementById('needLogin');
    const favList=document.getElementById('favList');
    const empty=document.getElementById('empty');

    function isLogged(){ return !!localStorage.getItem('userLogged'); }

    function render(){
      if(!isLogged()){
        needLogin.classList.remove('hidden');
        favList.innerHTML=''; empty.classList.add('hidden');
        return;
      }
      needLogin.classList.add('hidden');
      const favs = JSON.parse(localStorage.getItem('favs')||'[]');
      if(!favs.length){ empty.classList.remove('hidden'); return; }
      empty.classList.add('hidden');

      // В демо нет БД — покажем только id
      favList.innerHTML = favs.map(id=>`
        <article class="rounded-2xl border bg-white overflow-hidden">
          <div class="p-4">
            <div class="text-sm text-neutral-500">ID объявления</div>
            <div class="text-lg font-semibold">${id}</div>
          </div>
        </article>`).join('');
    }

    // вход
    const modal=document.getElementById('modalLogin');
    function openLogin(){ modal.classList.remove('hidden'); modal.classList.add('flex'); }
    function closeLogin(){ modal.classList.add('hidden'); modal.classList.remove('flex'); }

    document.getElementById('btnLogin').addEventListener('click', openLogin);
    document.getElementById('send').addEventListener('click', ()=>{ document.getElementById('loginOtp').classList.remove('hidden'); document.getElementById('confirm').classList.remove('hidden'); alert('Код отправлен (демо)'); });
    document.getElementById('confirm').addEventListener('click', ()=>{ localStorage.setItem('userLogged','1'); closeLogin(); render(); });
    document.getElementById('close').addEventListener('click', closeLogin);

    render();
  </script>
</body>
</html>
